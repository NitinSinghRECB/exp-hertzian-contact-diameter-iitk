<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Virtual Lab Experiment</title>
  <link rel="stylesheet" href="./css/styles.css">
</head>

<body>

  <!-- Header -->
  <header class="header">
    <div>
      <h1>Fracture Toughness of Ceramics</h1>
      <p>Material Testing laboratory</p>
    </div>
    <div class="header-actions">
      <button class="procedure-btn" onclick="openProcedure()">Procedure</button>
      <button class="reset-btn" onclick="resetExperiment()">Reset</button>
    </div>
  </header>

  <!-- Procedure Modal -->
  <div class="overlay" id="procedure">
    <div class="modal">
      <div class="modal-top">
        <h2>Experiment Procedure</h2>
        <span onclick="closeProcedure()">✕</span>
      </div>
      <ol>
        <li>Select the material for testing.</li>
        <li>Enter the indentation load and dwell time, then click <b>Submit</b>.</li>
        <li>Open the 2D view and click <b>Indent</b> to start the virtual indentation.</li>
        <li>Observe crack formation in Top View and 3D View.</li>
        <li>Use <b>Measure Crack Length</b> to view crack images and length table.</li>
        <li>Check the <b>Result</b> and <b>Conclusion</b> for final toughness values.</li>
      </ol>

    </div>
  </div>

  <!-- Main Layout -->
  <div class="workspace">

    <!-- Controls -->
    <aside class="controls">
      <h3>Control Panel</h3>

      <!-- MATERIAL SELECTION -->
      <button class="primary" id="materialsBtn" onclick="showMaterialOptions()">
        Materials
      </button>

      <div id="materialOptions" class="material-box" style="display:none;">
        <h4>Select Material</h4>

        <label class="mat-option">
          <input type="radio" name="material" value="Mild Steel" id="mildRadio" onclick="materialSelected()">
          Hafnium diboride (HfB₂)
        </label>
      </div>

      <button class="primary" id="performIndentBtn" onclick="showIndentPanel()" style="display:none;">
        Perform Vickers Indentation Test
      </button>


      <div id="indentPanel" class="indent-panel">

        <div class="input-row">
          <label>Force</label>
          <div class="input-unit">
            <input type="number" id="forceInput" step="0.1" min="0.1" max="10">
            <span>kg</span>
          </div>
          <div class="range">Range: 0.5kg - 2kg</div>
        </div>

        <div class="input-row">
          <label>Holding Time</label>
          <div class="input-unit">
            <input type="number" id="timeInput" step="1" min="0">
            <span>s</span>
          </div>

          <div class="range">Range: 0sec - 10sec</div>
        </div>
        <button id="submitIndent" class="primary" disabled onclick="submitIndent()">
          Submit
        </button>

      </div>

      <button class="primary" id='dis2d' onclick="display2d()">Two-Dimentional View</button>
      <button class="primary" id="indent" onclick="movedown()">Indent</button>

      <button class="primary" id="measureCrackBtn" onclick="openCrackMeasure()" style="display:none;">
        Measure Crack Length
      </button>

      <button class="primary" id="formula" onclick="showformula()">Formulae Used</button>

      <button class="primary" id="resultBtn" onclick="showResult()">
        Result
      </button>

      <button class="primary" id="conclusionBtn" onclick="showConclusion()">
        Conclusion
      </button>

    </aside>

    <!-- Simulation Area -->
    <section class="simulation">

      <div class="sim-upper">
        <h3>Simulation Area</h3>
        <div class="placeholder">
          <div id="infoBox">Move the mouse pointer on the images to see the details</div>
          <h1 id="heading">Machine Over View</h1>

          <!-- SVG REMOVED FROM HERE -->
          <div class="svg-container">
            <div class="innersvg">
              <!-- SVG REMOVED COMPLETELY -->
               <div id="svgStage" class="svg-stage" style="display:none;">
    <img id="indentSVG" src="" alt="Indentation SVG">
</div>


            </div>
          </div>

        </div>
      </div>

      <div class="sim-lower">
        <h3>Observations</h3>

        <div class="parameter-block">
          <h3 class="param-title">Test Parameters</h3>

          <div class="param-row-horizontal">

            <div class="param-cell">
              <span class="param-label">Strain Rate</span>
              <span class="param-value">0.05 s⁻¹</span>
            </div>

            <div class="param-cell">
              <span class="param-label">Load Rate</span>
              <span class="param-value">0.2 mN/s</span>
            </div>

            <div class="param-cell">
              <span class="param-label">Displacement Rate</span>
              <span class="param-value">10 nm/s</span>
            </div>

            <div class="param-cell">
              <span class="param-label">Thermal Drift</span>
              <span class="param-value">≤ 0.05 nm/s</span>
            </div>

          </div>
        </div>

      </div>

    </section>

  </div>

  <!-- Formula Popup -->
  <div id="formulaModal" class="formula-modal">
    <div class="formula-box">

      <span class="close-btn" onclick="closeFormula()">✖</span>

      <h3>Fracture Toughness Formula</h3>

      <div class="formula-content">

        <div class="formula-equation-box">
          K<sub>IC</sub> = 0.016 (E/H)<sup>1/2</sup> · P / c<sup>3/2</sup>
        </div>

        <br>

        <p><b>Where,</b></p>

        <ul class="formula-list">
          <li><b>K<sub>IC</sub></b> – fracture toughness (MPa√m)</li>
          <li><b>E</b> – elastic modulus (GPa)</li>
          <li><b>H</b> – hardness (GPa)</li>
          <li><b>P</b> – applied load (N)</li>
          <li><b>c</b> – crack length from indentation center to crack tip (m)</li>
          <li><b>0.016</b> – empirical calibration constant</li>
        </ul>

      </div>
    </div>
  </div>

  
<!-- CONCLUSION POPUP -->
<div id="conclusionModal" class="formula-modal conclusion-modal">
  <div class="formula-box conclusion-box">

    <span class="close-btn" onclick="closeConclusion()">✖</span>
    <h3>Conclusions</h3>

    <div class="conclusion-content">

      <ul class="conclusion-list">
        <li>
          Alumina, due to its higher stiffness, deforms less under load, producing a smaller contact
          area and consequently higher Hertzian contact pressure.
        </li>

        <li>
          The elevated pressure generates larger subsurface stresses that promote crack initiation
          and brittle fracture rather than plastic flow.
        </li>

        <li>
          Mild steel, being more compliant, spreads the load over a larger area, reducing contact
          pressure and encouraging plastic deformation.
        </li>

        <li>
          Thus, Hertzian pressure helps predict wear mode: ductile (plastic flow) in mild steel and
          brittle (cracking/chipping) in alumina.
        </li>
      </ul>

    </div>

  </div>
</div>




<!-- RESULT POPUP -->
<div id="resultModal" class="formula-modal result-modal">
  <div class="formula-box result-box">

    <span class="close-btn" onclick="closeResult()">✖</span>
    <h3>Material Comparison Results</h3>

    <div class="result-content">

      <table class="result-table">
        <tr>
          <th>Property</th>
          <th>Mild Steel</th>
          <th>Alumina</th>
          <th>Remarks</th>
        </tr>

        <tr>
          <td>Specimen modulus Eₛ (GPa)</td>
          <td>210</td>
          <td>380</td>
          <td>Alumina is stiffer than MS</td>
        </tr>

        <tr>
          <td>Poisson’s ratio νₛ</td>
          <td>0.30</td>
          <td>0.22</td>
          <td>—</td>
        </tr>

        <tr>
          <td>Max depth hₘₐₓ (nm)</td>
          <td>42</td>
          <td>32</td>
          <td>—</td>
        </tr>

        <tr>
          <td>Stiffness S = dP/dh (kN/m)</td>
          <td>177</td>
          <td>237</td>
          <td>Alumina is stiffer than MS</td>
        </tr>

        <tr>
          <td>Reduced modulus E* (GPa)</td>
          <td>192</td>
          <td>296</td>
          <td>Alumina is stiffer than MS</td>
        </tr>

        <tr>
          <td>Load P (mN)</td>
          <td>5</td>
          <td>5</td>
          <td>constant</td>
        </tr>

        <tr>
          <td>Tip radius R (µm)</td>
          <td>5</td>
          <td>5</td>
          <td>constant</td>
        </tr>

        <tr>
          <td>Contact radius a (µm)</td>
          <td>0.46</td>
          <td>0.40</td>
          <td>Decreases with stiffness</td>
        </tr>

        <tr>
          <td>Contact area A = πa² (m²)</td>
          <td>6.66 × 10⁻¹³</td>
          <td>4.96 × 10⁻¹³</td>
          <td>Decreases with stiffness</td>
        </tr>

        <tr>
          <td>Mean pressure pₘ (GPa)</td>
          <td>7.5</td>
          <td>10.1</td>
          <td>Increases with stiffness</td>
        </tr>

        <tr>
          <td>Max pressure p₀ (GPa)</td>
          <td>11.3</td>
          <td>15.2</td>
          <td>Increases with stiffness</td>
        </tr>

        <tr>
          <td>Max shear stress τₘₐₓ (GPa)</td>
          <td>3.5</td>
          <td>4.7</td>
          <td>Increases with stiffness</td>
        </tr>

      </table>

    </div>
  </div>
</div>










  <script src="./js/main.js"></script>

</body>
</html>
